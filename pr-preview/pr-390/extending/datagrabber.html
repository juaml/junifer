<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="7.3. Creating Markers" href="marker.html" /><link rel="prev" title="7.1. Creating a junifer extension" href="extension.html" />

    <!-- Generated with Sphinx 8.0.2 and Furo 2024.08.06 -->
        <title>7.2. Creating Data Grabbers - junifer documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=f7ba4aed" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">junifer documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><div class="sidebar-scroll"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/junifer_logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">junifer documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">1. Installing <code class="docutils literal notranslate"><span class="pre">junifer</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html#installing-external-dependencies">2. Installing external dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../starting.html">3. First steps with <code class="docutils literal notranslate"><span class="pre">junifer</span></code></a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../understanding/index.html">4. Understanding <code class="docutils literal notranslate"><span class="pre">junifer</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 4. Understanding junifer</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../understanding/pipeline.html">4.1. The <code class="docutils literal notranslate"><span class="pre">junifer</span></code> Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../understanding/data.html">4.2. The Data Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../understanding/datagrabber.html">4.3. Data Grabber</a></li>
<li class="toctree-l2"><a class="reference internal" href="../understanding/datareader.html">4.4. Data Reader</a></li>
<li class="toctree-l2"><a class="reference internal" href="../understanding/preprocess.html">4.5. Preprocess</a></li>
<li class="toctree-l2"><a class="reference internal" href="../understanding/marker.html">4.6. Marker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../understanding/storage.html">4.7. Storage</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../using/index.html">5. Using <code class="docutils literal notranslate"><span class="pre">junifer</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 5. Using junifer</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../using/codeless.html">5.1. Code-less Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using/running.html">5.2. Running Jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using/running.html#collecting-results">5.3. Collecting Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using/running.html#analysing-results">5.4. Analysing Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using/queueing.html">5.5. Queueing Jobs (HPC, HTC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../using/masks.html">5.6.1. Masks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../builtin.html">6. Built-in Pipeline Components</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">7. Extending <code class="docutils literal notranslate"><span class="pre">junifer</span></code></a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 7. Extending junifer</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="extension.html">7.1. Creating a <code class="docutils literal notranslate"><span class="pre">junifer</span></code> extension</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">7.2. Creating Data Grabbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="marker.html">7.3. Creating Markers</a></li>
<li class="toctree-l2"><a class="reference internal" href="preprocessor.html">7.4. Creating Preprocessors</a></li>
<li class="toctree-l2"><a class="reference internal" href="dependencies.html">7.5. Specifying Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="parcellations.html">7.6. Adding Parcellations</a></li>
<li class="toctree-l2"><a class="reference internal" href="coordinates.html">7.7. Adding Coordinates</a></li>
<li class="toctree-l2"><a class="reference internal" href="masks.html">7.8. Adding Masks</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../auto_examples/index.html">8. Examples</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 8. Examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../auto_examples/norun_ukbvm_gmd.html">8.1. UKB VBM GMD Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auto_examples/run_datagrabber_bids_datalad.html">8.2. Generic BIDS DataGrabber for datalad.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auto_examples/run_run_gmd_mean.html">8.3. UKB VBM GMD Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auto_examples/run_compute_parcel_mean.html">8.4. Computer Parcel Aggregation.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auto_examples/run_ets_rss_marker.html">8.5. Extracting root sum of squares from edge-wise timeseries.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auto_examples/norun_hcpfc_pearson.html">8.6. HCP FC Extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auto_examples/run_junifer_julearn.html">8.7. Run junifer and julearn.</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/index.html">9. API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of 9. API Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/datagrabbers.html">9.1.1. Data Grabbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/datareaders.html">9.1.2. DataReaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/preprocessing.html">9.1.3. Pre-processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/markers.html">9.1.4. Markers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/storage.html">9.1.5. Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/data.html">9.2.1. Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/stats.html">9.2.2. Stats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/pipeline.html">9.2.3. Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/api.html">9.2.4. API Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/cli.html">9.2.5. CLI Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/utils.html">9.2.6. Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/testing.html">9.2.7. Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/onthefly.html">9.2.8. On-the-fly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/configs.html">9.3.1. Configs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/nilearn.html">9.4.1. Nilearn</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../help.html">10. Getting Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribution.html">11. Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintaining.html">12. Maintaining</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">13. FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new.html">14. What’s new</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/extending/datagrabber.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="creating-data-grabbers">
<span id="extending-datagrabbers"></span><h1><span class="section-number">7.2. </span>Creating Data Grabbers<a class="headerlink" href="#creating-data-grabbers" title="Link to this heading">¶</a></h1>
<p>Data Grabbers are the first step of the pipeline. Its purpose is to interpret
the structure of a dataset and provide two specific functionalities:</p>
<ol class="arabic simple">
<li><p>Given an <em>element</em>, provide the path to each kind of data available for this
element (e.g. the path to the T1 image, the path to the T2 image, etc.)</p></li>
<li><p>Provide the list of <em>elements</em> available in the dataset.</p></li>
</ol>
<p>In this section, we will see how to create a DataGrabber for a dataset. Basic
aspects of DataGrabbers are covered in the
<a class="reference internal" href="../understanding/datagrabber.html#datagrabber"><span class="std std-ref">Understanding Data Grabbers</span></a> section.</p>
<section id="step-1-think-about-the-element">
<span id="extending-datagrabbers-think"></span><h2><span class="section-number">7.2.1. </span>Step 1: Think about the element<a class="headerlink" href="#step-1-think-about-the-element" title="Link to this heading">¶</a></h2>
<p>Like with any programming-related task, the first step is to think. When
creating a DataGrabber, we need to first define what an <em>element</em> is.
The <em>element</em> should be the smallest unit of data that can be processed. That
is, for each element, there should be a set of data that can be processed, but
only one of each <em>data type</em> (see <a class="reference internal" href="../understanding/data.html#data-types"><span class="std std-ref">Data Types</span></a>).</p>
<p>For example, if we have a dataset from a fMRI study in which:</p>
<ol class="loweralpha simple">
<li><p>both T1w and fMRI was acquired</p></li>
<li><p>20 subjects went through an experiment twice</p></li>
<li><p>the experiment included resting-stage fMRI and a task named <em>stroop</em></p></li>
</ol>
<p>then the <em>element</em> should be composed of 3 items:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">subject</span></code>: The subject IDs, e.g. <code class="docutils literal notranslate"><span class="pre">sub001</span></code>, <code class="docutils literal notranslate"><span class="pre">sub002</span></code>, … <code class="docutils literal notranslate"><span class="pre">sub020</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">session</span></code>: The session number, e.g. <code class="docutils literal notranslate"><span class="pre">ses1</span></code>, <code class="docutils literal notranslate"><span class="pre">ses2</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">task</span></code>: The task performed, e.g. <code class="docutils literal notranslate"><span class="pre">rest</span></code>, <code class="docutils literal notranslate"><span class="pre">stroop</span></code></p></li>
</ul>
<p>If any of these items were not part of the element, then we will have more than
one <code class="docutils literal notranslate"><span class="pre">T1w</span></code> and / or <code class="docutils literal notranslate"><span class="pre">BOLD</span></code> image for each subject, which is not allowed.</p>
<p>Importantly, nothing prevents that one image being part of two different
elements. For example, it is usually the case that the <code class="docutils literal notranslate"><span class="pre">T1w</span></code> image is not
acquired for each task, but once in the entire session. So in this case, the
<code class="docutils literal notranslate"><span class="pre">T1w</span></code> image for the element (<code class="docutils literal notranslate"><span class="pre">sub001</span></code>, <code class="docutils literal notranslate"><span class="pre">ses1</span></code>, <code class="docutils literal notranslate"><span class="pre">rest</span></code>) will be the same
as the <code class="docutils literal notranslate"><span class="pre">T1w</span></code> image for the element (<code class="docutils literal notranslate"><span class="pre">sub001</span></code>, <code class="docutils literal notranslate"><span class="pre">ses1</span></code>, <code class="docutils literal notranslate"><span class="pre">stroop</span></code>).</p>
<p>We will now continue this section using as an example, a dataset in BIDS format
in which 9 subjects (<code class="docutils literal notranslate"><span class="pre">sub-01</span></code> to <code class="docutils literal notranslate"><span class="pre">sub-09</span></code>) were scanned each during 3
sessions (<code class="docutils literal notranslate"><span class="pre">ses-01</span></code>, <code class="docutils literal notranslate"><span class="pre">ses-02</span></code>, <code class="docutils literal notranslate"><span class="pre">ses-03</span></code>) and each session included a
<code class="docutils literal notranslate"><span class="pre">T1w</span></code> and a <code class="docutils literal notranslate"><span class="pre">BOLD</span></code> image (resting-state), except for <code class="docutils literal notranslate"><span class="pre">ses-03</span></code> which was
only anatomical data.</p>
</section>
<section id="step-2-think-about-the-dataset-s-structure">
<h2><span class="section-number">7.2.2. </span>Step 2: Think about the dataset’s structure<a class="headerlink" href="#step-2-think-about-the-dataset-s-structure" title="Link to this heading">¶</a></h2>
<p>Now that we have our element defined, we need to think about the structure of
the dataset. Mainly, because the structure of the dataset will determine how
the DataGrabber needs to be implemented.</p>
<p><code class="docutils literal notranslate"><span class="pre">junifer</span></code> provides a concrete class to deal with datasets that can be thought
in terms of <em>patterns</em>. A <em>pattern</em> is a string that contains placeholders that
are replaced by the actual values of the element. In our BIDS example, the path
to the T1w image of subject <code class="docutils literal notranslate"><span class="pre">sub-01</span></code> and session <code class="docutils literal notranslate"><span class="pre">ses-01</span></code>, relative to the
dataset location, is <code class="docutils literal notranslate"><span class="pre">sub-01/ses-01/anat/sub-01_ses-01_T1w.nii.gz</span></code>. By
replacing <code class="docutils literal notranslate"><span class="pre">sub-01</span></code> with <code class="docutils literal notranslate"><span class="pre">sub-02</span></code>, we can obtain the T1w image of the first
session of the second subject. Indeed, the path to the T1w images can be
expressed as a pattern:</p>
<p><code class="docutils literal notranslate"><span class="pre">{subject}/{session}/anat/{subject}_{session}_T1w.nii.gz</span></code></p>
<p>where <code class="docutils literal notranslate"><span class="pre">{subject}</span></code> is the replacement for the subject id and <code class="docutils literal notranslate"><span class="pre">{session}</span></code>
is the replacement for the session id.</p>
<p>Since it is a BIDS dataset, the same happens with the BOLD images. The path to
the BOLD images can be expressed as a pattern:</p>
<p><code class="docutils literal notranslate"><span class="pre">{subject}/{session}/func/{subject}_{session}_task-rest_bold.nii.gz</span></code></p>
<p>This will be the norm in most of the datasets. If your dataset can be expressed
in terms of patterns, then follow <a class="reference internal" href="#extending-datagrabbers-pattern"><span class="std std-ref">Step 3: Create a Data Grabber</span></a>.
Otherwise, we recommend that you take time to re-think about your dataset
structure and why it does not have clear <em>patterns</em>. Feel free to open a
discussion in the <a class="reference external" href="https://github.com/juaml/junifer/discussions">junifer Discussions</a> page. Most probably we can help you
get your dataset in order.</p>
<p>If there is no other way, then you can follow <a class="reference internal" href="#extending-datagrabbers-base"><span class="std std-ref">Option B: Extending from BaseDataGrabber</span></a>
to create a DataGrabber from scratch.</p>
</section>
<section id="step-3-create-a-data-grabber">
<span id="extending-datagrabbers-pattern"></span><h2><span class="section-number">7.2.3. </span>Step 3: Create a Data Grabber<a class="headerlink" href="#step-3-create-a-data-grabber" title="Link to this heading">¶</a></h2>
<section id="option-a-extending-from-patterndatagrabber">
<h3>Option A: Extending from PatternDataGrabber<a class="headerlink" href="#option-a-extending-from-patterndatagrabber" title="Link to this heading">¶</a></h3>
<p>The <a class="reference internal" href="../api/datagrabbers.html#junifer.datagrabber.PatternDataGrabber" title="junifer.datagrabber.PatternDataGrabber"><code class="xref py py-class docutils literal notranslate"><span class="pre">PatternDataGrabber</span></code></a> class is a concrete class that has the
functionality of understanding patterns embedded in it.</p>
<p>Before creating the DataGrabber, we need to define 3 variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">types</span></code>: A list with the available <a class="reference internal" href="../understanding/data.html#data-types"><span class="std std-ref">Data Types</span></a> in our dataset.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">patterns</span></code>: A dictionary that specifies the pattern and some additional
information for each data type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">replacements</span></code>: A list indicating which of the elements in the patterns
should be replaced by the values of the element.</p></li>
</ul>
<p>For example, in our BIDS example, the variables will be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;T1w&quot;</span><span class="p">,</span> <span class="s2">&quot;BOLD&quot;</span><span class="p">]</span>
<span class="n">patterns</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;T1w&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/anat/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_T1w.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;space&quot;</span><span class="p">:</span> <span class="s2">&quot;native&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;BOLD&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/func/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_task-rest_bold.nii.gz&quot;</span><span class="p">,</span>
        <span class="s2">&quot;space&quot;</span><span class="p">:</span> <span class="s2">&quot;MNI152NLin6Asym&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
<span class="n">replacements</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>An additional fourth variable is the <code class="docutils literal notranslate"><span class="pre">datadir</span></code>, which should be the path to
where the dataset is located. For example, if the dataset is located in
<code class="docutils literal notranslate"><span class="pre">/data/project/test/data</span></code>, then <code class="docutils literal notranslate"><span class="pre">datadir</span></code> should be
<code class="docutils literal notranslate"><span class="pre">/data/project/test/data</span></code>. Or, if we want to allow the user to specify the
location of the dataset, we can expose the variable in the constructor, as in
the following example.</p>
<p>With the variables defined above, we can create our DataGrabber and name it
<code class="docutils literal notranslate"><span class="pre">ExampleBIDSDataGrabber</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">junifer.datagrabber</span> <span class="kn">import</span> <span class="n">PatternDataGrabber</span>


<span class="k">class</span> <span class="nc">ExampleBIDSDataGrabber</span><span class="p">(</span><span class="n">PatternDataGrabber</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">datadir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;T1w&quot;</span><span class="p">,</span> <span class="s2">&quot;BOLD&quot;</span><span class="p">]</span>
        <span class="n">patterns</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;T1w&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/anat/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_T1w.nii.gz&quot;</span><span class="p">,</span>
                <span class="s2">&quot;space&quot;</span><span class="p">:</span> <span class="s2">&quot;native&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;BOLD&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/func/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_task-rest_bold.nii.gz&quot;</span><span class="p">,</span>
                <span class="s2">&quot;space&quot;</span><span class="p">:</span> <span class="s2">&quot;MNI152NLin6Asym&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="n">replacements</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">datadir</span><span class="o">=</span><span class="n">datadir</span><span class="p">,</span>
            <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">,</span>
            <span class="n">patterns</span><span class="o">=</span><span class="n">patterns</span><span class="p">,</span>
            <span class="n">replacements</span><span class="o">=</span><span class="n">replacements</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>Our DataGrabber is ready to be used by <code class="docutils literal notranslate"><span class="pre">junifer</span></code>. However, it is still unknown
to the library. We need to register it in the library. To do so, we need to
use the <a class="reference internal" href="../api/api.html#junifer.api.decorators.register_datagrabber" title="junifer.api.decorators.register_datagrabber"><code class="xref py py-func docutils literal notranslate"><span class="pre">register_datagrabber()</span></code></a> decorator.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">junifer.api.decorators</span> <span class="kn">import</span> <span class="n">register_datagrabber</span>
<span class="kn">from</span> <span class="nn">junifer.datagrabber</span> <span class="kn">import</span> <span class="n">PatternDataGrabber</span>


<span class="nd">@register_datagrabber</span>
<span class="k">class</span> <span class="nc">ExampleBIDSDataGrabber</span><span class="p">(</span><span class="n">PatternDataGrabber</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">datadir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;T1w&quot;</span><span class="p">,</span> <span class="s2">&quot;BOLD&quot;</span><span class="p">]</span>
        <span class="n">patterns</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;T1w&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/anat/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_T1w.nii.gz&quot;</span><span class="p">,</span>
                <span class="s2">&quot;space&quot;</span><span class="p">:</span> <span class="s2">&quot;native&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;BOLD&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/func/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_task-rest_bold.nii.gz&quot;</span><span class="p">,</span>
                <span class="s2">&quot;space&quot;</span><span class="p">:</span> <span class="s2">&quot;MNI152NLin6Asym&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="n">replacements</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">datadir</span><span class="o">=</span><span class="n">datadir</span><span class="p">,</span>
            <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">,</span>
            <span class="n">patterns</span><span class="o">=</span><span class="n">patterns</span><span class="p">,</span>
            <span class="n">replacements</span><span class="o">=</span><span class="n">replacements</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>Now, we can use our DataGrabber in <code class="docutils literal notranslate"><span class="pre">junifer</span></code>, by setting the <code class="docutils literal notranslate"><span class="pre">datagrabber</span></code>
kind in the yaml file to <code class="docutils literal notranslate"><span class="pre">ExampleBIDSDataGrabber</span></code>. Remember that we still need
to set the <code class="docutils literal notranslate"><span class="pre">datadir</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">datagrabber</span><span class="p">:</span>
<span class="w">   </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExampleBIDSDataGrabber</span>
<span class="w">   </span><span class="nt">datadir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/data/project/test/data</span>
</pre></div>
</div>
<section id="optional-using-datalad">
<h4>Optional: Using datalad<a class="headerlink" href="#optional-using-datalad" title="Link to this heading">¶</a></h4>
<p>If you are using <a class="reference external" href="https://datalad.org">datalad</a>, you can use the <a class="reference internal" href="../api/datagrabbers.html#junifer.datagrabber.PatternDataladDataGrabber" title="junifer.datagrabber.PatternDataladDataGrabber"><code class="xref py py-class docutils literal notranslate"><span class="pre">PatternDataladDataGrabber</span></code></a>
instead of the <a class="reference internal" href="../api/datagrabbers.html#junifer.datagrabber.PatternDataGrabber" title="junifer.datagrabber.PatternDataGrabber"><code class="xref py py-class docutils literal notranslate"><span class="pre">PatternDataGrabber</span></code></a>. This class will not only
interpret patterns, but also use <a class="reference external" href="https://datalad.org">datalad</a> to <code class="docutils literal notranslate"><span class="pre">clone</span></code> and <code class="docutils literal notranslate"><span class="pre">get</span></code> the data.</p>
<p>The main difference between the two is that the <code class="docutils literal notranslate"><span class="pre">datadir</span></code> is not the actual
location of the dataset, but the location where the dataset will be cloned. It
can now be <code class="docutils literal notranslate"><span class="pre">None</span></code>, which means that the data will be downloaded to a
temporary directory. To set the location of the dataset, you can use the
<code class="docutils literal notranslate"><span class="pre">uri</span></code> argument in the constructor. Additionally, a <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> argument can
be used to specify the path to the root directory of the dataset after doing
<code class="docutils literal notranslate"><span class="pre">datalad</span> <span class="pre">clone</span></code>.</p>
<p>In the example, the dataset is hosted in Gin
(<code class="docutils literal notranslate"><span class="pre">https://gin.g-node.org/juaml/datalad-example-bids</span></code>).</p>
<p>When we clone this dataset, we will see the following structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
└── example_bids_ses
   ├── sub-01
   │   ├── ses-01
   │   ├── ses-02
   │   └── ses-03
   ├── sub-02
   │   ├── ses-01
   │   ├── ses-02
   │   └── ses-03
   ├── sub-03
   ...
</pre></div>
</div>
<p>So the patterns will start after <code class="docutils literal notranslate"><span class="pre">example_bids_ses</span></code>. This is our <code class="docutils literal notranslate"><span class="pre">rootdir</span></code>.</p>
<p>Now we have our 2 additional variables:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;https://gin.g-node.org/juaml/datalad-example-bids&quot;</span>
<span class="n">rootdir</span> <span class="o">=</span> <span class="s2">&quot;example_bids_ses&quot;</span>
</pre></div>
</div>
<p>And we can create our DataGrabber:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">junifer.api.decorators</span> <span class="kn">import</span> <span class="n">register_datagrabber</span>
<span class="kn">from</span> <span class="nn">junifer.datagrabber</span> <span class="kn">import</span> <span class="n">PatternDataladDataGrabber</span>


<span class="nd">@register_datagrabber</span>
<span class="k">class</span> <span class="nc">ExampleBIDSDataGrabber</span><span class="p">(</span><span class="n">PatternDataladDataGrabber</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;T1w&quot;</span><span class="p">,</span> <span class="s2">&quot;BOLD&quot;</span><span class="p">]</span>
        <span class="n">patterns</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;T1w&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/anat/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_T1w.nii.gz&quot;</span><span class="p">,</span>
                <span class="s2">&quot;space&quot;</span><span class="p">:</span> <span class="s2">&quot;native&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;BOLD&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/func/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_task-rest_bold.nii.gz&quot;</span><span class="p">,</span>
                <span class="s2">&quot;space&quot;</span><span class="p">:</span> <span class="s2">&quot;MNI152NLin6Asym&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="n">replacements</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">]</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;https://gin.g-node.org/juaml/datalad-example-bids&quot;</span>
        <span class="n">rootdir</span> <span class="o">=</span> <span class="s2">&quot;example_bids_ses&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">datadir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span>
            <span class="n">rootdir</span><span class="o">=</span><span class="n">rootdir</span><span class="p">,</span>
            <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">,</span>
            <span class="n">patterns</span><span class="o">=</span><span class="n">patterns</span><span class="p">,</span>
            <span class="n">replacements</span><span class="o">=</span><span class="n">replacements</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>
</div>
<p>This approach can be used directly from the YAML, like so:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">datagrabber</span><span class="p">:</span>
<span class="w">  </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PatternDataladDataGrabber</span>
<span class="w">  </span><span class="nt">types</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">BOLD</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">T1w</span>
<span class="w">  </span><span class="nt">patterns</span><span class="p">:</span>
<span class="w">    </span><span class="nt">BOLD</span><span class="p">:</span>
<span class="w">      </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{subject}/{session}/func/{subject}_{session}_task-rest_bold.nii.gz&quot;</span>
<span class="w">      </span><span class="nt">space</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MNI152NLin6Asym</span>
<span class="w">    </span><span class="nt">T1w</span><span class="p">:</span>
<span class="w">      </span><span class="nt">pattern</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{subject}/{session}/anat/{subject}_{session}_T1w.nii.gz&quot;</span>
<span class="w">      </span><span class="nt">space</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">native</span>
<span class="w">  </span><span class="nt">replacements</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">subject</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">session</span>
<span class="w">  </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://gin.g-node.org/juaml/datalad-example-bids&quot;</span>
<span class="w">  </span><span class="nt">rootdir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example_bids_ses</span>
</pre></div>
</div>
</section>
<section id="advanced-using-unix-like-path-expansion-directives">
<h4>Advanced: Using Unix-like path expansion directives<a class="headerlink" href="#advanced-using-unix-like-path-expansion-directives" title="Link to this heading">¶</a></h4>
<p>It is also possible to use some advanced Unix-like path expansion tricks to
define our patterns.</p>
<p>A very common thing would be to use <code class="docutils literal notranslate"><span class="pre">*</span></code> to match any number of
characters but we cannot use it right after a replacement like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;derivatives/freesurfer/</span><span class="si">{subject}</span><span class="s2">*&quot;</span>
</pre></div>
</div>
<p>or if there are multiple files or no files which can be globbed.</p>
<p>We can also use <code class="docutils literal notranslate"><span class="pre">[]</span></code> and <code class="docutils literal notranslate"><span class="pre">[!]</span></code> to glob certain tricky files like with the
case of FreeSurfer derivatives. The file structure seen in a typical
FreeSurfer derivative of a dataset (like <code class="docutils literal notranslate"><span class="pre">AOMIC</span></code> ones) is like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
└── derivatives
    └── freesurfer
       ├── fsaverage
       │   ├── mri
       │   |   ├── T1.mgz
       │   |   └── ...
       │   └── ...
       ├── sub-01
       │   ├── mri
       │   |   ├── T1.mgz
       │   |   └── ...
       │   |   └── ...
       │   └── ...
       ...
</pre></div>
</div>
<p>With a structure like this, it would be cumbersome to write custom methods
for the class and thus we could use a pattern like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;derivatives/freesurfer/[!f]</span><span class="si">{subject}</span><span class="s2">/mri/T1.mg[z]&quot;</span>
</pre></div>
</div>
<p>This would ignore the <code class="docutils literal notranslate"><span class="pre">fsaverage</span></code> directory as a subject and let <code class="docutils literal notranslate"><span class="pre">T1.mgz</span></code> be
fetched as there can be many files with the same prefix.</p>
</section>
</section>
<section id="option-b-extending-from-basedatagrabber">
<span id="extending-datagrabbers-base"></span><h3>Option B: Extending from BaseDataGrabber<a class="headerlink" href="#option-b-extending-from-basedatagrabber" title="Link to this heading">¶</a></h3>
<p>While we could not think of a use case in which the pattern-based DataGrabber
would not be suitable, it is still possible to create a DataGrabber extending
from the <a class="reference internal" href="../api/datagrabbers.html#junifer.datagrabber.BaseDataGrabber" title="junifer.datagrabber.BaseDataGrabber"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDataGrabber</span></code></a> class.</p>
<p>In order to create a DataGrabber extending from <a class="reference internal" href="../api/datagrabbers.html#junifer.datagrabber.BaseDataGrabber" title="junifer.datagrabber.BaseDataGrabber"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDataGrabber</span></code></a>, we
need to implement the following methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">get_item</span></code>: to get a single item from the dataset.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_elements</span></code>: to get the list of all elements present in the dataset</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_element_keys</span></code>: to get the keys of the elements in the dataset.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method could also be implemented, but it is not mandatory.
This is required if the DataGrabber requires any extra parameter.</p>
</div>
<p>We will now implement our BIDS example with this method.</p>
<p>The first method, <code class="docutils literal notranslate"><span class="pre">get_item</span></code>, needs to obtain a single
item from the dataset. Since this dataset requires two variables, <code class="docutils literal notranslate"><span class="pre">subject</span></code>
and <code class="docutils literal notranslate"><span class="pre">session</span></code>, we will use them as parameters of <code class="docutils literal notranslate"><span class="pre">get_item</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">session</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;T1w&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">session</span><span class="si">}</span><span class="s2">/anat/</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">session</span><span class="si">}</span><span class="s2">_T1w.nii.gz&quot;</span><span class="p">,</span>
            <span class="s2">&quot;space&quot;</span><span class="p">:</span> <span class="s2">&quot;native&quot;</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="s2">&quot;BOLD&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">session</span><span class="si">}</span><span class="s2">/func/</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">session</span><span class="si">}</span><span class="s2">_task-rest_bold.nii.gz&quot;</span><span class="p">,</span>
            <span class="s2">&quot;space&quot;</span><span class="p">:</span> <span class="s2">&quot;MNI152NLin6Asym&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">out</span>
</pre></div>
</div>
<p>The second method, <code class="docutils literal notranslate"><span class="pre">get_elements</span></code>, needs to return a list of all the elements
in the dataset. In this case, we know that the dataset contains 3 subjects and 3
sessions, so we can create a list of all the possible combinations. However, we
need to remember that for session <em>ses-03</em> there is no BOLD data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">product</span>


<span class="k">def</span> <span class="nf">get_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="n">subjects</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;sub-01&quot;</span><span class="p">,</span> <span class="s2">&quot;sub-02&quot;</span><span class="p">,</span> <span class="s2">&quot;sub-03&quot;</span><span class="p">]</span>
    <span class="n">sessions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ses-01&quot;</span><span class="p">,</span> <span class="s2">&quot;ses-02&quot;</span><span class="p">]</span>

    <span class="c1"># If we are not working on BOLD data, we can add &quot;ses-03&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;BOLD&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">types</span><span class="p">:</span>
        <span class="n">sessions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;ses-03&quot;</span><span class="p">)</span>
    <span class="n">elements</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">subject</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="n">subjects</span><span class="p">,</span> <span class="n">sessions</span><span class="p">):</span>
        <span class="n">elements</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;subject&quot;</span><span class="p">:</span> <span class="n">subject</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">:</span> <span class="n">session</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">elements</span>
</pre></div>
</div>
<p>And finally, we can implement the <code class="docutils literal notranslate"><span class="pre">get_element_keys</span></code> method. This method needs
to return a list of the keys that represent each of the items in the element
tuple. As a rule of thumb, they should be the parameters of the <code class="docutils literal notranslate"><span class="pre">get_item</span></code>
method, in the same order.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_element_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>So, to summarise, our DataGrabber will look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">junifer.api.decorators</span> <span class="kn">import</span> <span class="n">register_datagrabber</span>
<span class="kn">from</span> <span class="nn">junifer.datagrabber</span> <span class="kn">import</span> <span class="n">BaseDataGrabber</span>


<span class="nd">@register_datagrabber</span>
<span class="k">class</span> <span class="nc">ExampleBIDSDataGrabber</span><span class="p">(</span><span class="n">BaseDataGrabber</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_item</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">session</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;T1w&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">session</span><span class="si">}</span><span class="s2">/anat/</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">session</span><span class="si">}</span><span class="s2">_T1w.nii.gz&quot;</span><span class="p">,</span>
                <span class="s2">&quot;space&quot;</span><span class="p">:</span> <span class="s2">&quot;native&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;BOLD&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">session</span><span class="si">}</span><span class="s2">/func/</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">session</span><span class="si">}</span><span class="s2">_task-rest_bold.nii.gz&quot;</span><span class="p">,</span>
                <span class="s2">&quot;space&quot;</span><span class="p">:</span> <span class="s2">&quot;MNI152NLin6Asym&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span> <span class="nf">get_elements</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">subjects</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;sub-01&quot;</span><span class="p">,</span> <span class="s2">&quot;sub-02&quot;</span><span class="p">,</span> <span class="s2">&quot;sub-03&quot;</span><span class="p">]</span>
        <span class="n">sessions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;ses-01&quot;</span><span class="p">,</span> <span class="s2">&quot;ses-02&quot;</span><span class="p">]</span>

        <span class="c1"># If we are not working on BOLD data, we can add &quot;ses-03&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;BOLD&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">types</span><span class="p">:</span>
            <span class="n">sessions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;ses-03&quot;</span><span class="p">)</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">subject</span> <span class="ow">in</span> <span class="n">subjects</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">session</span> <span class="ow">in</span> <span class="n">sessions</span><span class="p">:</span>
                <span class="n">elements</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;subject&quot;</span><span class="p">:</span> <span class="n">subject</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">:</span> <span class="n">session</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">elements</span>

    <span class="k">def</span> <span class="nf">get_element_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">]</span>
</pre></div>
</div>
<section id="id1">
<h4>Optional: Using datalad<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h4>
<p>If this dataset is in a datalad dataset, we can extend from
<a class="reference internal" href="../api/datagrabbers.html#junifer.datagrabber.DataladDataGrabber" title="junifer.datagrabber.DataladDataGrabber"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataladDataGrabber</span></code></a> instead of <a class="reference internal" href="../api/datagrabbers.html#junifer.datagrabber.BaseDataGrabber" title="junifer.datagrabber.BaseDataGrabber"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseDataGrabber</span></code></a>. This will
allow us to use the datalad API to obtain the data.</p>
</section>
</section>
</section>
<section id="step-4-optional-adding-bold-confounds">
<h2><span class="section-number">7.2.4. </span>Step 4: Optional: Adding <em>BOLD confounds</em><a class="headerlink" href="#step-4-optional-adding-bold-confounds" title="Link to this heading">¶</a></h2>
<p>For some analyses, it is useful to have the confounds associated with the BOLD
data. This corresponds to the <code class="docutils literal notranslate"><span class="pre">BOLD.confounds</span></code> item in the
<a class="reference internal" href="../understanding/data.html#data-object"><span class="std std-ref">Data Object</span></a> (see <a class="reference internal" href="../understanding/data.html#data-types"><span class="std std-ref">Data Types</span></a>). However, the
<code class="docutils literal notranslate"><span class="pre">BOLD.confounds</span></code> element does not only consists of a <code class="docutils literal notranslate"><span class="pre">path</span></code>, but it requires
more information about the format of the confounds file. Thus, the
<code class="docutils literal notranslate"><span class="pre">BOLD.confounds</span></code> element is a dictionary with the following keys:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">path</span></code>: the path to the confounds file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format</span></code>: the format of the confounds file. Currently, this can be either
<code class="docutils literal notranslate"><span class="pre">fmriprep</span></code> or <code class="docutils literal notranslate"><span class="pre">adhoc</span></code>.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">fmriprep</span></code> format corresponds to the format of the confounds files
generated by <a class="reference external" href="https://fmriprep.org">fMRIPrep</a>. The <code class="docutils literal notranslate"><span class="pre">adhoc</span></code> format corresponds to a format that is
not standardised.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">mappings</span></code> key is only required if the <code class="docutils literal notranslate"><span class="pre">format</span></code> is <code class="docutils literal notranslate"><span class="pre">adhoc</span></code>. If the
<code class="docutils literal notranslate"><span class="pre">format</span></code> is <code class="docutils literal notranslate"><span class="pre">fmriprep</span></code>, the <code class="docutils literal notranslate"><span class="pre">mappings</span></code> key is not required.</p>
</div>
<p>Currently, <code class="docutils literal notranslate"><span class="pre">junifer</span></code> provides only one confound remover step
(<a class="reference internal" href="../api/preprocessing.html#junifer.preprocess.fMRIPrepConfoundRemover" title="junifer.preprocess.fMRIPrepConfoundRemover"><code class="xref py py-class docutils literal notranslate"><span class="pre">fMRIPrepConfoundRemover</span></code></a>), which relies entirely on the <code class="docutils literal notranslate"><span class="pre">fmriprep</span></code>
confound variable names. Thus, if the confounds are not in <code class="docutils literal notranslate"><span class="pre">fmriprep</span></code> format,
the user will need to provide the mappings between the <em>ad-hoc</em> variable names
and the <code class="docutils literal notranslate"><span class="pre">fmriprep</span></code> variable names. This is done by specifying the <code class="docutils literal notranslate"><span class="pre">adhoc</span></code>
format and providing the mappings as a dictionary in the <code class="docutils literal notranslate"><span class="pre">mappings</span></code> key.</p>
<p>In the following example, the confounds file has 3 variables that are not in the
<code class="docutils literal notranslate"><span class="pre">fmriprep</span></code> format. Thus, we will provide the mappings for these variables to
the <code class="docutils literal notranslate"><span class="pre">fmriprep</span></code> format. For example, the <code class="docutils literal notranslate"><span class="pre">get_item</span></code> method could look like
this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">session</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;BOLD&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">session</span><span class="si">}</span><span class="s2">/func/</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">session</span><span class="si">}</span><span class="s2">_task-rest_bold.nii.gz&quot;</span><span class="p">,</span>
            <span class="s2">&quot;space&quot;</span><span class="p">:</span> <span class="s2">&quot;MNI152NLin6Asym&quot;</span><span class="p">,</span>
            <span class="s2">&quot;confounds&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">session</span><span class="si">}</span><span class="s2">/func/</span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">session</span><span class="si">}</span><span class="s2">_confounds.tsv&quot;</span><span class="p">,</span>
                <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;adhoc&quot;</span><span class="p">,</span>
                <span class="s2">&quot;mappings&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;fmriprep&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;variable1&quot;</span><span class="p">:</span> <span class="s2">&quot;rot_x&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;variable2&quot;</span><span class="p">:</span> <span class="s2">&quot;rot_z&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;variable3&quot;</span><span class="p">:</span> <span class="s2">&quot;rot_y&quot;</span><span class="p">,</span>
                    <span class="p">},</span>
                <span class="p">},</span>
            <span class="p">},</span>
        <span class="p">},</span>
    <span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Not all of the mappings need to be provided. For the moment, this is used
only by the <a class="reference internal" href="../api/preprocessing.html#junifer.preprocess.fMRIPrepConfoundRemover" title="junifer.preprocess.fMRIPrepConfoundRemover"><code class="xref py py-class docutils literal notranslate"><span class="pre">fMRIPrepConfoundRemover</span></code></a> step, which requires variables
based on the strategy selected. However, it is recommended to provide all the
mappings, as this will allow the user to choose different strategies with the
same dataset.</p>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="marker.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">7.3. </span>Creating Markers</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="extension.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">7.1. </span>Creating a <code class="docutils literal notranslate"><span class="pre">junifer</span></code> extension</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, junifer Contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">7.2. Creating Data Grabbers</a><ul>
<li><a class="reference internal" href="#step-1-think-about-the-element">7.2.1. Step 1: Think about the element</a></li>
<li><a class="reference internal" href="#step-2-think-about-the-dataset-s-structure">7.2.2. Step 2: Think about the dataset’s structure</a></li>
<li><a class="reference internal" href="#step-3-create-a-data-grabber">7.2.3. Step 3: Create a Data Grabber</a><ul>
<li><a class="reference internal" href="#option-a-extending-from-patterndatagrabber">Option A: Extending from PatternDataGrabber</a><ul>
<li><a class="reference internal" href="#optional-using-datalad">Optional: Using datalad</a></li>
<li><a class="reference internal" href="#advanced-using-unix-like-path-expansion-directives">Advanced: Using Unix-like path expansion directives</a></li>
</ul>
</li>
<li><a class="reference internal" href="#option-b-extending-from-basedatagrabber">Option B: Extending from BaseDataGrabber</a><ul>
<li><a class="reference internal" href="#id1">Optional: Using datalad</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#step-4-optional-adding-bold-confounds">7.2.4. Step 4: Optional: Adding <em>BOLD confounds</em></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=dff93f89"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/js/custom.js?v=9868c0c7"></script>
    </body>
</html>