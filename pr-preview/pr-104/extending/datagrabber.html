<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4.1. Creating DataGrabbers &mdash; junifer  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-rendered-html.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. Examples" href="../auto_examples/index.html" />
    <link rel="prev" title="4. Extending junifer" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> junifer
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">1. Installing junifer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../understanding/index.html">2. Understanding junifer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../builtin.html">3. Pipeline steps and atlases</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">4. Extending junifer</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">4.1. Creating DataGrabbers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#step-1-think-about-the-element">4.1.1. Step 1: Think about the element</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-2-think-about-the-dataset-s-structure">4.1.2. Step 2: Think about the dataset’s structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#option-a-extending-from-patterndatagrabber">4.1.3. Option A: Extending from PatternDataGrabber</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#optional-using-datalad">4.1.3.1. Optional: Using datalad</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#option-b-extending-from-basedatagrabber">4.1.4. Option B: Extending from BaseDataGrabber</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../auto_examples/index.html">5. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">6. API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribution.html">7. Contributing to junifer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintaining.html">8. Maintaining</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">9. FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new.html">10. What’s new</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">junifer</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">4. </span>Extending junifer</a> &raquo;</li>
      <li><span class="section-number">4.1. </span>Creating DataGrabbers</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/extending/datagrabber.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="creating-datagrabbers">
<span id="extending-datagrabbers"></span><h1><span class="section-number">4.1. </span>Creating DataGrabbers<a class="headerlink" href="#creating-datagrabbers" title="Permalink to this heading"></a></h1>
<p>DataGrabbers are the first step of the pipeline. It’s purpose is to interpret
the structure of a dataset and provide two specific functionalities:</p>
<ol class="arabic simple">
<li><p>Given an <em>element</em>, provide the path to each kind of data available for this
element (e.g. the path to the T1 image, the path to the T2 image, etc.)</p></li>
<li><p>Provide the list of <em>elements</em> available in the dataset.</p></li>
</ol>
<p>In this section, we will see how to create a datagrabber for a dataset. Basic
aspects of datagrabbers are covedered in the
<a class="reference internal" href="../understanding/datagrabber.html#datagrabbers"><span class="std std-ref">Understanding DataGrabbers</span></a> section.</p>
<section id="step-1-think-about-the-element">
<span id="extending-datagrabbers-think"></span><h2><span class="section-number">4.1.1. </span>Step 1: Think about the element<a class="headerlink" href="#step-1-think-about-the-element" title="Permalink to this heading"></a></h2>
<p>Like with any programming-related task, the first step is to think. When
creating a DataGrabber, we need to first define what an <em>element</em> is.
The <em>element</em> should be the smallest unit of data that can be processed. That
is, for each element, there should be a set of data that can be processed, but
only one of each <em>data type</em> (see <a class="reference internal" href="../understanding/data.html#data-types"><span class="std std-ref">Data types</span></a>).</p>
<p>For example, if we have a dataset from an fMRI study in which:</p>
<ol class="loweralpha simple">
<li><p>both T1w and fMRI was acquired</p></li>
<li><p>20 subjects went through a experiment twice</p></li>
<li><p>the experiment included resting-stage fMRI and a task named <em>stroop</em></p></li>
</ol>
<p>then the <em>element</em> should be composed of 3 items:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">subject</span></code>: The subject IDs, e.g. <cite>sub001</cite>, <cite>sub002</cite>, … <cite>sub020</cite></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">session</span></code>: The sesion number, e.g. <cite>ses1</cite>, <cite>ses2</cite></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">task</span></code>: The task performed, e.g. <cite>rest</cite>, <cite>stroop</cite></p></li>
</ul>
<p>If any of this items were not part of the element, then we will have more than
one <code class="docutils literal notranslate"><span class="pre">T1w</span></code> and/or <code class="docutils literal notranslate"><span class="pre">BOLD</span></code> image for each subject, which is not allowed.</p>
<p>Importantly, nothing prevents that one image is part of two different elements.
For example, it is usually the case that the <code class="docutils literal notranslate"><span class="pre">T1w</span></code> image is not acquired for
each task, but once in the entire session. So in this case, the <code class="docutils literal notranslate"><span class="pre">T1w</span></code> image
for the element (<code class="docutils literal notranslate"><span class="pre">sub001</span></code>, <code class="docutils literal notranslate"><span class="pre">ses1</span></code>, <code class="docutils literal notranslate"><span class="pre">rest</span></code>) will be the same as the
<code class="docutils literal notranslate"><span class="pre">T1w</span></code> image for the element (<code class="docutils literal notranslate"><span class="pre">sub001</span></code>, <code class="docutils literal notranslate"><span class="pre">ses1</span></code>, <code class="docutils literal notranslate"><span class="pre">stroop</span></code>).</p>
<p>We will now continue this section using as an example, a dataset in BIDS format
in which each 9 subjects (<cite>sub-01</cite> to <cite>sub-09</cite>) were scanned each in 3
sessions (<cite>ses-01</cite>, <cite>ses-02</cite>, <cite>ses-03</cite>) and each session included a <cite>T1w</cite> and
a <cite>BOLD</cite> image (resting-state), except for <cite>ses-03</cite> which was only anatomical.</p>
</section>
<section id="step-2-think-about-the-dataset-s-structure">
<h2><span class="section-number">4.1.2. </span>Step 2: Think about the dataset’s structure<a class="headerlink" href="#step-2-think-about-the-dataset-s-structure" title="Permalink to this heading"></a></h2>
<p>Now that we have our element defined, we need to think about the structure of
the dataset. Mainly, because the structure of the dataset will determine how
the DataGrabber needs to be implemented.</p>
<p>Junifer provides an abstract class to deal with datasets that can be thought in
terms of <em>patterns</em>. A <em>pattern</em> is a string that contains placeholders that are
replaced by the actual values of the element. In our BIDS example, the path
to the T1w image of subject <cite>sub-01</cite> and session <cite>ses-01</cite>, relative to the
dataset location, is <code class="docutils literal notranslate"><span class="pre">sub-01/ses-01/anat/sub-01_ses-01_T1w.nii.gz</span></code>. By
replacing <code class="docutils literal notranslate"><span class="pre">sub-01</span></code> with <code class="docutils literal notranslate"><span class="pre">sub-02</span></code>, we can obtain the T1w image of the first
session of the second subject. Indeed, the path to the T1w images can be
expressed as a pattern:</p>
<p><code class="docutils literal notranslate"><span class="pre">{subject}/{session}/anat/{subject}_{session}_T1w.nii.gz</span></code></p>
<p>where <code class="docutils literal notranslate"><span class="pre">{subject}</span></code> is the replacement for the subject id and <code class="docutils literal notranslate"><span class="pre">{session}}</span></code>
is the replacement for the session id.</p>
<p>Since it is a BIDS dataaset, the same happens with the BOLD images. The path to
the BOLD images can be expressed as a pattern:</p>
<p><code class="docutils literal notranslate"><span class="pre">{subject}/{session}/func/{subject}_{session}_task-rest_bold.nii.gz</span></code></p>
<p>This will be the norm in most of the datasets. If your dataset can be expressed
in terms of patterns, then follow <a class="reference internal" href="#extending-datagrabbers-pattern"><span class="std std-ref">Option A: Extending from PatternDataGrabber</span></a>.
Otherwise, we recommend that you take time to re-think about your dataset
structure and why it does not have clear <em>patterns</em>. Feel free to open a
discussion in the <a class="reference external" href="https://github.com/juaml/junifer/discussions">junifer Discussions</a> page. Most probably we can help you
get your dataset in order.</p>
<p>If there is no other way, then you can follow <a class="reference internal" href="#extending-datagrabbers-base"><span class="std std-ref">Option B: Extending from BaseDataGrabber</span></a>
to create a DataGrabber from scratch.</p>
</section>
<section id="option-a-extending-from-patterndatagrabber">
<span id="extending-datagrabbers-pattern"></span><h2><span class="section-number">4.1.3. </span>Option A: Extending from PatternDataGrabber<a class="headerlink" href="#option-a-extending-from-patterndatagrabber" title="Permalink to this heading"></a></h2>
<p>The <a class="reference internal" href="../api/datagrabbers.html#junifer.datagrabber.PatternDataGrabber" title="junifer.datagrabber.PatternDataGrabber"><code class="xref py py-class docutils literal notranslate"><span class="pre">PatternDataGrabber</span></code></a> class is an
abstract class that has the functionality of understanding patterns embeded
in it.</p>
<p>Before creating the datagrabber, we need to define 3 variables:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">types</span></code>: A list with the available <a class="reference internal" href="../understanding/data.html#data-types"><span class="std std-ref">Data types</span></a> in our dataset</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">patterns</span></code>: A dictionary that specifies the pattern for each data type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">replacements</span></code>: A list indicating which of the elements in the patterns
should be replaced by the values of the element.</p></li>
</ul>
<p>For example, in our BIDS example, the variables will be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;T1w&quot;</span><span class="p">,</span> <span class="s2">&quot;BOLD&quot;</span><span class="p">]</span>
<span class="n">patterns</span> <span class="o">=</span> <span class="p">{</span>
   <span class="s2">&quot;T1w&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/anat/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_T1w.nii.gz&quot;</span><span class="p">,</span>
   <span class="s2">&quot;BOLD&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/func/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_task-rest_bold.nii.gz&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">replacements</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>An additional fourth variable is the <code class="docutils literal notranslate"><span class="pre">datadir</span></code>, which should be the path to
where the dataset is located. For example, if the dataset is located in
<code class="docutils literal notranslate"><span class="pre">/data/project/test/data</span></code>, then <code class="docutils literal notranslate"><span class="pre">datadir</span></code> should be
<code class="docutils literal notranslate"><span class="pre">/data/project/test/data</span></code>. Or, if we want to allow the user to specify the
location of the dataset, we can expose the variable in the constructor, as in
this example</p>
<p>With this defined, we can now create our datagrabber, we will name it
<code class="docutils literal notranslate"><span class="pre">ExampleBIDSDataGrabber</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">junifer.datagrabber.pattern</span> <span class="kn">import</span> <span class="n">PatternDataGrabber</span>

<span class="k">class</span> <span class="nc">ExampleBIDSDataGrabber</span><span class="p">(</span><span class="n">PatternDataGrabber</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">datadir</span><span class="p">):</span>
        <span class="n">types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;T1w&quot;</span><span class="p">,</span> <span class="s2">&quot;BOLD&quot;</span><span class="p">]</span>
        <span class="n">patterns</span> <span class="o">=</span> <span class="p">{</span>
           <span class="s2">&quot;T1w&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/anat/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_T1w.nii.gz&quot;</span><span class="p">,</span>
           <span class="s2">&quot;BOLD&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/func/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_task-rest_bold.nii.gz&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">replacements</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
           <span class="n">datadir</span><span class="o">=</span><span class="n">datadir</span><span class="p">,</span>
           <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">,</span>
           <span class="n">patterns</span><span class="o">=</span><span class="n">patterns</span><span class="p">,</span>
           <span class="n">replacements</span><span class="o">=</span><span class="n">replacements</span><span class="p">)</span>
</pre></div>
</div>
<p>Our datagrabber is ready to be used by junifer. However, it is still unknown
to the library. We need to register it in the library. To do so, we need to
use the <a class="reference internal" href="../api/api.html#junifer.api.decorators.register_datagrabber" title="junifer.api.decorators.register_datagrabber"><code class="xref py py-func docutils literal notranslate"><span class="pre">register_datagrabber()</span></code></a> decorator.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">junifer.datagrabber.pattern</span> <span class="kn">import</span> <span class="n">PatternDataGrabber</span>
<span class="kn">from</span> <span class="nn">junifer.api.decorators</span> <span class="kn">import</span> <span class="n">register_datagrabber</span>


<span class="nd">@register_datagrabber</span>
<span class="k">class</span> <span class="nc">ExampleBIDSDataGrabber</span><span class="p">(</span><span class="n">PatternDataGrabber</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">datadir</span><span class="p">):</span>
        <span class="n">types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;T1w&quot;</span><span class="p">,</span> <span class="s2">&quot;BOLD&quot;</span><span class="p">]</span>
        <span class="n">patterns</span> <span class="o">=</span> <span class="p">{</span>
           <span class="s2">&quot;T1w&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/anat/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_T1w.nii.gz&quot;</span><span class="p">,</span>
           <span class="s2">&quot;BOLD&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/func/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_task-rest_bold.nii.gz&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">replacements</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
           <span class="n">datadir</span><span class="o">=</span><span class="n">datadir</span><span class="p">,</span>
           <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">,</span>
           <span class="n">patterns</span><span class="o">=</span><span class="n">patterns</span><span class="p">,</span>
           <span class="n">replacements</span><span class="o">=</span><span class="n">replacements</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, we can use our datagrabber in junifer, by setting the <code class="docutils literal notranslate"><span class="pre">datagrabber</span></code> kind
in the yaml file to <code class="docutils literal notranslate"><span class="pre">ExampleBIDSDataGrabber</span></code>. Remember that we still need to
set the <code class="docutils literal notranslate"><span class="pre">datadir</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">datagrabber</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExampleBIDSDataGrabber</span><span class="w"></span>
<span class="w">   </span><span class="nt">datadir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/data/project/test/data</span><span class="w"></span>
</pre></div>
</div>
<section id="optional-using-datalad">
<h3><span class="section-number">4.1.3.1. </span>Optional: Using datalad<a class="headerlink" href="#optional-using-datalad" title="Permalink to this heading"></a></h3>
<p>If you are using datalad, you can use the
<a class="reference internal" href="../api/datagrabbers.html#junifer.datagrabber.PatternDataladDataGrabber" title="junifer.datagrabber.PatternDataladDataGrabber"><code class="xref py py-class docutils literal notranslate"><span class="pre">PatternDataladDataGrabber</span></code></a> instead of the
<a class="reference internal" href="../api/datagrabbers.html#junifer.datagrabber.PatternDataGrabber" title="junifer.datagrabber.PatternDataGrabber"><code class="xref py py-class docutils literal notranslate"><span class="pre">PatternDataGrabber</span></code></a>. This class will also
interpret patterns, but will also use datalad to <cite>clone</cite> and <cite>get</cite> the data.</p>
<p>The main difference between the two is that the <code class="docutils literal notranslate"><span class="pre">datadir</span></code> is not the actual
location of the dataset, but the location where the dataset will be cloned. It
can now be <code class="docutils literal notranslate"><span class="pre">None</span></code>, which means that the data will be downloaded to a
temporary directory. To set the location of the dataset, you can use the
<code class="docutils literal notranslate"><span class="pre">uri</span></code> argument in the constructor. Additionally, a <code class="docutils literal notranslate"><span class="pre">rootdir</span></code> argument can
be used to specify the path to the root directory of the dataset after doing
<code class="docutils literal notranslate"><span class="pre">datalad</span> <span class="pre">clone</span></code></p>
<p>In the example, the dataset is hosted in gin
(<code class="docutils literal notranslate"><span class="pre">https://gin.g-node.org/juaml/datalad-example-bids</span></code>).</p>
<p>When we clone this dataset, we will see the following structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>.
└── example_bids_ses
   ├── sub-01
   │   ├── ses-01
   │   ├── ses-02
   │   └── ses-03
   ├── sub-02
   │   ├── ses-01
   │   ├── ses-02
   │   └── ses-03
   ├── sub-03
   ...
</pre></div>
</div>
<p>So the patterns will start after <code class="docutils literal notranslate"><span class="pre">example_bids_ses</span></code>. This is our <code class="docutils literal notranslate"><span class="pre">rootdir</span></code>.</p>
<p>Now we have our 2 additional variables:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;https://gin.g-node.org/juaml/datalad-example-bids&quot;</span>
<span class="n">rootdir</span> <span class="o">=</span> <span class="s2">&quot;example_bids_ses&quot;</span>
</pre></div>
</div>
<p>And we can create our datagrabber:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">junifer.datagrabber.pattern</span> <span class="kn">import</span> <span class="n">PatternDataladDataGrabber</span>
<span class="kn">from</span> <span class="nn">junifer.api.decorators</span> <span class="kn">import</span> <span class="n">register_datagrabber</span>


<span class="nd">@register_datagrabber</span>
<span class="k">class</span> <span class="nc">ExampleBIDSDataGrabber</span><span class="p">(</span><span class="n">PatternDataladDataGrabber</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">types</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;T1w&quot;</span><span class="p">,</span> <span class="s2">&quot;BOLD&quot;</span><span class="p">]</span>
        <span class="n">patterns</span> <span class="o">=</span> <span class="p">{</span>
           <span class="s2">&quot;T1w&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/anat/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_T1w.nii.gz&quot;</span><span class="p">,</span>
           <span class="s2">&quot;BOLD&quot;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{subject}</span><span class="s2">/</span><span class="si">{session}</span><span class="s2">/func/</span><span class="si">{subject}</span><span class="s2">_</span><span class="si">{session}</span><span class="s2">_task-rest_bold.nii.gz&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">replacements</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">]</span>
        <span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;https://gin.g-node.org/juaml/datalad-example-bids&quot;</span>
        <span class="n">rootdir</span> <span class="o">=</span> <span class="s2">&quot;example_bids_ses&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
           <span class="n">datadir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
           <span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span>
           <span class="n">rootdir</span><span class="o">=</span><span class="n">rootdir</span><span class="p">,</span>
           <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">,</span>
           <span class="n">patterns</span><span class="o">=</span><span class="n">patterns</span><span class="p">,</span>
           <span class="n">replacements</span><span class="o">=</span><span class="n">replacements</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="option-b-extending-from-basedatagrabber">
<span id="extending-datagrabbers-base"></span><h2><span class="section-number">4.1.4. </span>Option B: Extending from BaseDataGrabber<a class="headerlink" href="#option-b-extending-from-basedatagrabber" title="Permalink to this heading"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="4. Extending junifer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../auto_examples/index.html" class="btn btn-neutral float-right" title="5. Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Authors of junifer.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>