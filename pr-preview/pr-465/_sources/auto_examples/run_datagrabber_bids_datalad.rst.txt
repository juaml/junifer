
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/run_datagrabber_bids_datalad.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_examples_run_datagrabber_bids_datalad.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_run_datagrabber_bids_datalad.py:


Generic BIDS DataGrabber for datalad.
=====================================

This example uses a generic BIDS DataGraber to get the data from a BIDS dataset
store in a datalad remote sibling.

Authors: Federico Raimondo

License: BSD 3 clause

.. GENERATED FROM PYTHON SOURCE LINES 12-17

.. code-block:: Python


    from junifer.datagrabber import PatternDataladDataGrabber
    from junifer.utils import configure_logging









.. GENERATED FROM PYTHON SOURCE LINES 18-19

Set the logging level to info to see extra information

.. GENERATED FROM PYTHON SOURCE LINES 19-22

.. code-block:: Python

    configure_logging(level="INFO")






.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    /__w/junifer/junifer/junifer/utils/logging.py:155: UserWarning: The '__version__' attribute is deprecated and will be removed in MarkupSafe 3.1. Use feature detection, or `importlib.metadata.version("markupsafe")`, instead.
      vstring = str(getattr(module, "__version__", None))
    2025-09-19 09:44:38,968 - JUNIFER - INFO - ===== Lib Versions =====
    2025-09-19 09:44:38,968 - JUNIFER - INFO - click: 8.1.8
    2025-09-19 09:44:38,968 - JUNIFER - INFO - numpy: 1.26.4
    2025-09-19 09:44:38,968 - JUNIFER - INFO - scipy: 1.15.0
    2025-09-19 09:44:38,968 - JUNIFER - INFO - datalad: 1.1.6
    2025-09-19 09:44:38,968 - JUNIFER - INFO - pandas: 2.1.4
    2025-09-19 09:44:38,968 - JUNIFER - INFO - nibabel: 5.3.2
    2025-09-19 09:44:38,968 - JUNIFER - INFO - nilearn: 0.10.4
    2025-09-19 09:44:38,968 - JUNIFER - INFO - sqlalchemy: 2.0.43
    2025-09-19 09:44:38,968 - JUNIFER - INFO - ruamel.yaml: 0.18.15
    2025-09-19 09:44:38,969 - JUNIFER - INFO - templateflow: 24.2.2
    2025-09-19 09:44:38,969 - JUNIFER - INFO - junifer_data: None
    2025-09-19 09:44:38,969 - JUNIFER - INFO - junifer: 0.0.7.dev183
    2025-09-19 09:44:38,969 - JUNIFER - INFO - ========================




.. GENERATED FROM PYTHON SOURCE LINES 23-26

The BIDS DataGrabber requires three parameters: the types of data we want,
the specific pattern that matches each type, and the variables that will be
replaced in the patterns.

.. GENERATED FROM PYTHON SOURCE LINES 26-38

.. code-block:: Python

    types = ["T1w", "BOLD"]
    patterns = {
        "T1w": {
            "pattern": "{subject}/anat/{subject}_T1w.nii.gz",
            "space": "native",
        },
        "BOLD": {
            "pattern": "{subject}/func/{subject}_task-rest_bold.nii.gz",
            "space": "MNI152NLin6Asym",
        },
    }
    replacements = ["subject"]







.. GENERATED FROM PYTHON SOURCE LINES 39-41

Additionally, a datalad-based DataGrabber requires the URI of the remote
sibling and the location of the dataset within the remote sibling.

.. GENERATED FROM PYTHON SOURCE LINES 41-44

.. code-block:: Python

    repo_uri = "https://gin.g-node.org/juaml/datalad-example-bids"
    rootdir = "example_bids"








.. GENERATED FROM PYTHON SOURCE LINES 45-48

Now we can use the DataGrabber within a `with` context.
One thing we can do with any DataGrabber is iterate over the elements.
In this case, each element of the DataGrabber is one session.

.. GENERATED FROM PYTHON SOURCE LINES 48-58

.. code-block:: Python

    with PatternDataladDataGrabber(
        rootdir=rootdir,
        types=types,
        patterns=patterns,
        uri=repo_uri,
        replacements=replacements,
    ) as dg:
        for elem in dg:
            print(elem)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    2025-09-19 09:44:38,969 - JUNIFER - INFO - `datadir` is None, creating a temporary directory
    2025-09-19 09:44:38,970 - JUNIFER - INFO - `datadir` set to /tmp/junifer/tmpyvrzd_ks/dataladg9jv3ib1/datadir
    sub-04
    sub-07
    sub-06
    sub-09
    sub-02
    sub-01
    sub-08
    sub-03
    sub-05




.. GENERATED FROM PYTHON SOURCE LINES 59-62

Another feature of the DataGrabber is the ability to get a specific
element by its name. In this case, we index `sub-01` and we get the file
paths for the two types of data we want (T1w and BOLD).

.. GENERATED FROM PYTHON SOURCE LINES 62-71

.. code-block:: Python

    with PatternDataladDataGrabber(
        rootdir=rootdir,
        types=types,
        patterns=patterns,
        uri=repo_uri,
        replacements=replacements,
    ) as dg:
        sub01 = dg["sub-01"]
        print(sub01)




.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    2025-09-19 09:44:41,404 - JUNIFER - INFO - `datadir` is None, creating a temporary directory
    2025-09-19 09:44:41,405 - JUNIFER - INFO - `datadir` set to /tmp/junifer/tmpyvrzd_ks/dataladkvrn_r5i/datadir
    2025-09-19 09:44:43,510 - JUNIFER - INFO - Getting element sub-01
    2025-09-19 09:44:43,511 - JUNIFER - INFO - Resolving path from pattern for T1w
    2025-09-19 09:44:43,511 - JUNIFER - INFO - Resolving path from pattern for BOLD
    {'T1w': {'space': 'native', 'path': PosixPath('/tmp/junifer/tmpyvrzd_ks/dataladkvrn_r5i/datadir/example_bids/sub-01/anat/sub-01_T1w.nii.gz'), 'meta': {'datagrabber': {'class': 'PatternDataladDataGrabber', 'replacements': ['subject'], 'patterns': {'T1w': {'pattern': '{subject}/anat/{subject}_T1w.nii.gz', 'space': 'native'}, 'BOLD': {'pattern': '{subject}/func/{subject}_task-rest_bold.nii.gz', 'space': 'MNI152NLin6Asym'}}, 'partial_pattern_ok': False, 'confounds_format': None, 'types': ['T1w', 'BOLD'], 'uri': 'https://gin.g-node.org/juaml/datalad-example-bids', 'datalad_dirty': False, 'datalad_commit_id': '3f288c8725207ae0c9b3616e093e78cda192b570', 'datalad_id': '582b9696-f13f-42e4-9587-b4e62aa2a8e7'}, 'dependencies': set(), 'element': {'subject': 'sub-01'}}}, 'BOLD': {'space': 'MNI152NLin6Asym', 'path': PosixPath('/tmp/junifer/tmpyvrzd_ks/dataladkvrn_r5i/datadir/example_bids/sub-01/func/sub-01_task-rest_bold.nii.gz'), 'meta': {'datagrabber': {'class': 'PatternDataladDataGrabber', 'replacements': ['subject'], 'patterns': {'T1w': {'pattern': '{subject}/anat/{subject}_T1w.nii.gz', 'space': 'native'}, 'BOLD': {'pattern': '{subject}/func/{subject}_task-rest_bold.nii.gz', 'space': 'MNI152NLin6Asym'}}, 'partial_pattern_ok': False, 'confounds_format': None, 'types': ['T1w', 'BOLD'], 'uri': 'https://gin.g-node.org/juaml/datalad-example-bids', 'datalad_dirty': False, 'datalad_commit_id': '3f288c8725207ae0c9b3616e093e78cda192b570', 'datalad_id': '582b9696-f13f-42e4-9587-b4e62aa2a8e7'}, 'dependencies': set(), 'element': {'subject': 'sub-01'}}}}





.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 5.481 seconds)


.. _sphx_glr_download_auto_examples_run_datagrabber_bids_datalad.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: run_datagrabber_bids_datalad.ipynb <run_datagrabber_bids_datalad.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: run_datagrabber_bids_datalad.py <run_datagrabber_bids_datalad.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: run_datagrabber_bids_datalad.zip <run_datagrabber_bids_datalad.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
